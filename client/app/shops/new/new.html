<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1 class="page-header">Add new shop:</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="alert alert-success" role="alert" ng-show="submittedSuccess"><strong>Success!</strong> The now shop was added to our database. Thank you!</div>
      <div class="alert alert-danger" role="alert" ng-show="submittedNoLocation"><strong>Error!</strong> I couldn't find the address!</div>
      <div class="alert alert-danger" role="alert" ng-show="submittedError"><strong>Error!</strong> Some strange error happened! Maybe try again for now...</div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <form class="form" name="form" ng-submit="addShop(form)" novalidate>

        <div class="form-group" ng-class="{ 'has-success': form.name.$valid && submitted,
                                            'has-error': form.name.$invalid && submitted && !submittedSuccess }">
          <label>Name</label>

          <input type="text" name="name" class="form-control" ng-model="newShop.name"
                 required/>
          <p class="help-block" ng-show="form.name.$error.required && submitted && !submittedSuccess">
            A name is required
          </p>
        </div>

        <div class="form-group" ng-class="{ 'has-success': form.address.$valid && submitted && submittedSuccess && !submittedNoLocation,
                                            'has-error': form.address.$invalid && submitted && !submittedSuccess || submittedNoLocation }">
          <label>Address</label>

          <input type="address" name="address" class="form-control" ng-model="newShop.address"
                 required
                 mongoose-error/>
          <p class="help-block" ng-show="form.address.$error.address && submitted && !submittedSuccess || submittedNoLocation">
            Doesn't look like a valid address.
          </p>
          <p class="help-block" ng-show="form.address.$error.required && submitted && !submittedSuccess">
            What's the address?
          </p>
          <p class="help-block" ng-show="form.address.$error.mongoose">
            {{ errors.address }}
          </p>
        </div>

        <div>
          <button class="btn btn-default btn-lg" type="button" ng-click="showOnMap()">
            1. Show on map
          </button>
          <button class="btn btn-primary btn-lg" type="submit" ng-disabled="!newShop.latitude">
            2. Submit
          </button>
        </div>

      </form>
    </div>

    <div class="col-md-6">
      <ui-gmap-google-map
          center="map.center"
          zoom="map.zoom"
          draggable="true"
          options="map.options" >
        <ui-gmap-marker coords="newShop" idkey="newShop._id" icon="'assets/images/logo-green.png'"></ui-gmap-marker>
      </ui-gmap-google-map>
    </div>
  </div>
</div>
